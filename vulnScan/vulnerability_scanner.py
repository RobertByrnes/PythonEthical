#!/usr/bin/env python
# -*- coding: utf-8 -*-
import argparse

import scanner
import proxies


# setup
def capture_ips():
    parser = argparse.ArgumentParser()
    parser.add_argument("-t", "--target", dest="target_ip", help="Target machine IP address.")
    parser.add_argument("-g", "--gateway", dest="gateway_ip", help="Gateway or Router IP address.")
    parser.add_argument("-i", "--time", dest="time_interval", help="Set time interval for packets. Default 0.5s.")
    victims = parser.parse_args()
    if not victims.target_ip or not victims.gateway_ip:
        parser.error("[-] Please specify both a target and a gateway, use --help for info")
    return victims


proxy_servers = proxies.ScannerProxies()
proxy_servers.get_proxies()
proxy_servers.serve_proxies()

target_url = "https://www.llexeter.co.uk"
links_to_ignore = []
data_dict = {"activity": "login", "email": "robbyrnes@hotmail.co.uk", "password": "Surfsup2020Â£"}

# instantiate
vuln_scanner = scanner.Scanner(target_url)

# run program
print("[+] Subdomain discovery >> " + str(vuln_scanner.find_subdomains()))
print("[+] Directories Discovered >> " + str(vuln_scanner.find_directories(target_url)))
print("[+] Link crawler results >> " + str(vuln_scanner.crawl(target_url)))
print("[+] Form discovery >> " + str(vuln_scanner.extract_forms()))
# print("[+] Login attempt response >> " + str(vuln_scanner.session.post(target_url, data=data_dict)))
